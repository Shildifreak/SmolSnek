<style>
body {
	padding: 0px;
	margin: 0px;
	overflow: hidden;
}
#f {
	height: min(100vh, 50vw);
	width: calc(min(200vh, 100vw) * 1.05);
}
.e {
background: lightgrey;
}
.s {
background: blue;
}
.a {
background: red;
}
</style>

<div id="f"></div>

<script>
var e,a,s=document,c='className',t=s.getElementById("f"),l=t.children,g=0,m=[0],d=1;for(n=0;n<210;n++)(e=s.createElement("div"))[c]=(n+1)%21?"e":"s",(a=e.style).width=100/21+"%",a.height="10%",a.float="left",t.appendChild(e);s.addEventListener("keydown",e=>{d={37:-1,38:-21,39:1,40:21}[e.keyCode]||d});window.setInterval(()=>{x=m[0],x+=d,"s"!=(e=l[x]||l[20])[c]&&("a"==e[c]&&g++,e[c]="s",m.unshift(x)),0==g?m.length>1&&(l[m.pop()][c]="e"):g--,x=Math.floor(210*Math.random()*100),"e"==(e=l[x]||{})[c]&&(e[c]="a")},100);
</script>
